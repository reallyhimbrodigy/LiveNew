<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LiveNew — Admin</title>
  <link rel="stylesheet" href="/assets/styles.css" />
</head>
<body data-page="admin">
  <header class="topbar">
    <div class="brand" data-i18n="appName">LiveNew</div>
    <nav class="nav">
      <a href="/day" data-i18n="nav.day">Day</a>
      <a href="/week" data-i18n="nav.week">Week</a>
      <a href="/trends" data-i18n="nav.trends">Trends</a>
      <a href="/profile" data-i18n="nav.profile">Profile</a>
      <a class="admin-link active" href="/admin" data-i18n="nav.admin">Admin</a>
    </nav>
    <div class="auth" id="auth-panel">
      <div class="auth-status" id="auth-status" data-i18n="auth.notSignedIn">Not signed in</div>
      <div class="auth-row">
        <input id="auth-email" type="email" placeholder="email" data-i18n-placeholder="auth.emailPlaceholder" aria-label="email" data-i18n-aria="auth.emailPlaceholder" />
        <button id="auth-request" data-i18n="auth.sendCode">Send code</button>
      </div>
      <div class="auth-row">
        <input id="auth-code" type="text" placeholder="code" data-i18n-placeholder="auth.codePlaceholder" aria-label="code" data-i18n-aria="auth.codePlaceholder" />
        <button id="auth-verify" data-i18n="auth.verify">Verify</button>
        <button id="auth-logout" class="ghost" data-i18n="auth.logout">Logout</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card" id="admin-guard">
      <h1 data-i18n="admin.title">Admin</h1>
      <p class="muted" id="admin-guard-text" data-i18n="admin.checking">Checking admin access…</p>
    </section>

    <section class="card hidden" id="admin-panel">
      <div class="tabs">
        <button class="tab active" data-tab="content" data-i18n="admin.content">Content</button>
        <button class="tab" data-tab="worst" data-i18n="admin.worst">Worst items</button>
        <button class="tab" data-tab="heatmap" data-i18n="admin.heatmap">Heatmap</button>
        <button class="tab" data-tab="weekly" data-i18n="admin.weeklyReport">Weekly report</button>
        <button class="tab" data-tab="params" data-i18n="admin.parameters">Parameters</button>
        <button class="tab" data-tab="cohorts" data-i18n="admin.cohorts">Cohorts</button>
        <button class="tab" data-tab="reminders" data-i18n="admin.reminders">Reminders</button>
      </div>

      <div class="tab-panel" data-panel="content">
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="admin-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <button id="admin-content-load" data-i18n="admin.load">Load</button>
        </div>
        <div class="split">
          <div class="list" id="admin-content-list"></div>
          <div class="editor" id="admin-content-editor">
            <h3 data-i18n="admin.editItem">Edit item</h3>
            <div class="grid-2">
              <label><span data-i18n="admin.titleLabel">Title</span> <input id="content-title" type="text" /></label>
              <label><span data-i18n="admin.enabledLabel">Enabled</span> <select id="content-enabled"><option value="true" data-i18n="admin.yes">Yes</option><option value="false" data-i18n="admin.no">No</option></select></label>
              <label><span data-i18n="admin.priority">Priority</span> <input id="content-priority" type="number" /></label>
              <label><span data-i18n="admin.noveltyGroup">Novelty group</span> <input id="content-novelty" type="text" /></label>
              <label><span data-i18n="admin.minutes">Minutes</span> <input id="content-minutes" type="number" /></label>
              <label><span data-i18n="admin.tags">Tags (comma)</span> <input id="content-tags" type="text" /></label>
            </div>
            <label><span data-i18n="admin.stepsPriorities">Steps / Priorities</span>
              <textarea id="content-steps" rows="4"></textarea>
            </label>
            <div class="row">
              <button id="content-save" data-i18n="admin.save">Save</button>
              <button id="content-disable" class="danger" data-i18n="admin.disable">Disable</button>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="worst">
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="worst-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <button id="worst-load" data-i18n="admin.load">Load</button>
        </div>
        <div id="worst-list" class="list"></div>
      </div>

      <div class="tab-panel hidden" data-panel="heatmap">
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="heatmap-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <button id="heatmap-load" data-i18n="admin.load">Load</button>
        </div>
        <table class="table" id="heatmap-table">
          <thead>
            <tr>
              <th data-i18n="admin.item">Item</th>
              <th data-i18n="admin.picked">Picked</th>
              <th data-i18n="admin.completed">Completed</th>
              <th data-i18n="admin.notRelevant">Not relevant</th>
              <th data-i18n="admin.completionRate">Completion rate</th>
              <th data-i18n="admin.notRelevantRate">Not relevant rate</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="tab-panel hidden" data-panel="weekly">
        <div class="row">
          <button id="weekly-load" data-i18n="admin.load">Load</button>
          <button id="weekly-download" class="ghost" data-i18n="admin.downloadJson">Download JSON</button>
          <button id="weekly-disable-all" class="danger" data-i18n="admin.disableAll">Disable all candidates</button>
        </div>
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="weekly-bump-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <label><span data-i18n="admin.item">Item</span> <input id="weekly-bump-id" type="text" /></label>
          <label><span data-i18n="admin.delta">Delta</span> <input id="weekly-bump-delta" type="number" value="1" /></label>
          <button id="weekly-bump" data-i18n="admin.bumpPriority">Bump priority</button>
        </div>
        <pre id="weekly-report" class="list-item"></pre>
      </div>

      <div class="tab-panel hidden" data-panel="params">
        <div id="params-list" class="list"></div>
      </div>

      <div class="tab-panel hidden" data-panel="cohorts">
        <div class="row">
          <button id="cohorts-load" data-i18n="admin.load">Load cohorts</button>
        </div>
        <div id="cohorts-list" class="list"></div>
        <div class="card">
          <h3 data-i18n="admin.setUserCohort">Set user cohort</h3>
          <div class="row">
            <input id="cohort-user-id" type="text" placeholder="user id" data-i18n-placeholder="admin.userId" />
            <input id="cohort-id" type="text" placeholder="cohort id" data-i18n-placeholder="admin.cohortId" />
            <button id="cohort-assign" data-i18n="admin.assign">Assign</button>
          </div>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="reminders">
        <div class="row">
          <input id="admin-reminders-date" type="date" />
          <select id="admin-reminders-status">
            <option value="" data-i18n="admin.anyStatus">Any status</option>
            <option value="scheduled" data-i18n="admin.scheduled">Scheduled</option>
            <option value="dismissed" data-i18n="admin.dismissed">Dismissed</option>
            <option value="completed" data-i18n="admin.completed">Completed</option>
          </select>
          <button id="admin-reminders-load" data-i18n="admin.load">Load</button>
        </div>
        <div id="admin-reminders-list" class="list"></div>
      </div>
    </section>
  </main>

  <script type="module" src="/assets/app.core.js"></script>
</body>
</html>
