<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>LiveNew — Admin</title>
  <link rel="stylesheet" href="/assets/styles.css" />
</head>
<body data-page="admin">
  <header class="topbar">
    <div class="brand" data-i18n="appName">LiveNew</div>
    <nav class="nav">
      <a href="/day" data-i18n="nav.day">Day</a>
      <a href="/week" data-i18n="nav.week">Week</a>
      <a href="/trends" data-i18n="nav.trends">Trends</a>
      <a href="/profile" data-i18n="nav.profile">Profile</a>
      <a class="admin-link active" href="/admin" data-i18n="nav.admin">Admin</a>
    </nav>
    <div class="auth" id="auth-panel">
      <div class="auth-status" id="auth-status" data-i18n="auth.notSignedIn">Not signed in</div>
      <div class="auth-row">
        <input id="auth-email" type="email" placeholder="email" data-i18n-placeholder="auth.emailPlaceholder" aria-label="email" data-i18n-aria="auth.emailPlaceholder" />
        <button id="auth-request" data-i18n="auth.sendCode">Send code</button>
      </div>
      <div class="auth-row">
        <input id="auth-code" type="text" placeholder="code" data-i18n-placeholder="auth.codePlaceholder" aria-label="code" data-i18n-aria="auth.codePlaceholder" />
        <button id="auth-verify" data-i18n="auth.verify">Verify</button>
        <button id="auth-logout" class="ghost" data-i18n="auth.logout">Logout</button>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="card" id="admin-guard">
      <h1 data-i18n="admin.title">Admin</h1>
      <p class="muted" id="admin-guard-text" data-i18n="admin.checking">Checking admin access…</p>
    </section>

    <section class="card hidden" id="admin-panel">
      <div class="tabs">
        <button class="tab active" data-tab="content" data-i18n="admin.content">Content</button>
        <button class="tab" data-tab="supplyChain" data-i18n="admin.supplyChain">Supply chain</button>
        <button class="tab" data-tab="worst" data-i18n="admin.worst">Worst items</button>
        <button class="tab" data-tab="heatmap" data-i18n="admin.heatmap">Heatmap</button>
        <button class="tab" data-tab="weekly" data-i18n="admin.weeklyReport">Weekly report</button>
        <button class="tab" data-tab="packs" data-i18n="admin.packs">Packs</button>
        <button class="tab" data-tab="experiments" data-i18n="admin.experiments">Experiments</button>
        <button class="tab" data-tab="previewMatrix" data-i18n="admin.previewMatrix">Preview matrix</button>
        <button class="tab" data-tab="params" data-i18n="admin.parameters">Parameters</button>
        <button class="tab" data-tab="cohorts" data-i18n="admin.cohorts">Cohorts</button>
        <button class="tab" data-tab="reminders" data-i18n="admin.reminders">Reminders</button>
        <button class="tab" data-tab="support" data-i18n="admin.support">Support</button>
        <button class="tab" data-tab="changelog" data-i18n="admin.changelog">Changelog</button>
      </div>

      <div class="tab-panel" data-panel="content">
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="admin-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <button id="admin-content-load" data-i18n="admin.load">Load</button>
        </div>
        <div class="split">
          <div class="list" id="admin-content-list"></div>
          <div class="editor" id="admin-content-editor">
            <h3 data-i18n="admin.editItem">Edit item</h3>
            <div class="grid-2">
              <label><span data-i18n="admin.titleLabel">Title</span> <input id="content-title" type="text" /></label>
              <label><span data-i18n="admin.enabledLabel">Enabled</span> <select id="content-enabled"><option value="true" data-i18n="admin.yes">Yes</option><option value="false" data-i18n="admin.no">No</option></select></label>
              <label><span data-i18n="admin.priority">Priority</span> <input id="content-priority" type="number" /></label>
              <label><span data-i18n="admin.noveltyGroup">Novelty group</span> <input id="content-novelty" type="text" /></label>
              <label><span data-i18n="admin.minutes">Minutes</span> <input id="content-minutes" type="number" /></label>
              <label><span data-i18n="admin.tags">Tags (comma)</span> <input id="content-tags" type="text" /></label>
            </div>
            <label><span data-i18n="admin.stepsPriorities">Steps / Priorities</span>
              <textarea id="content-steps" rows="4"></textarea>
            </label>
            <div class="row">
              <button id="content-save" data-i18n="admin.save">Save</button>
              <button id="content-disable" class="danger" data-i18n="admin.disable">Disable</button>
            </div>
          </div>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="supplyChain">
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="sc-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <label><span data-i18n="admin.status">Status</span>
            <select id="sc-status">
              <option value="draft" data-i18n="admin.draft">Draft</option>
              <option value="staged" data-i18n="admin.staged">Staged</option>
              <option value="enabled" data-i18n="admin.enabled">Enabled</option>
              <option value="disabled" data-i18n="admin.disabled">Disabled</option>
              <option value="all" data-i18n="admin.all">All</option>
            </select>
          </label>
          <button id="sc-load" data-i18n="admin.load">Load</button>
          <label class="row">
            <input id="sc-stage-mode" type="checkbox" />
            <span data-i18n="admin.stageMode">Stage mode</span>
          </label>
        </div>
        <div class="row">
          <label><span data-i18n="admin.scope">Scope</span>
            <select id="sc-scope">
              <option value="draft" data-i18n="admin.draft">Draft</option>
              <option value="staged" data-i18n="admin.staged">Staged</option>
              <option value="enabled" data-i18n="admin.enabled">Enabled</option>
              <option value="all" data-i18n="admin.all">All</option>
            </select>
          </label>
          <button id="sc-validate" data-i18n="admin.validate">Validate</button>
          <button id="sc-reports-load" class="ghost" data-i18n="admin.validationReports">Reports</button>
          <span id="sc-status-text" class="muted"></span>
        </div>
        <div class="split">
          <div class="list" id="sc-list"></div>
          <div class="editor" id="sc-editor">
            <h3 data-i18n="admin.supplyChainEditor">Supply chain editor</h3>
            <div id="sc-id" class="muted"></div>
            <div class="grid-2">
              <label><span data-i18n="admin.titleLabel">Title</span> <input id="sc-title" type="text" /></label>
              <label><span data-i18n="admin.priority">Priority</span> <input id="sc-priority" type="number" /></label>
              <label><span data-i18n="admin.minutes">Minutes</span> <input id="sc-minutes" type="number" /></label>
              <label><span data-i18n="admin.noveltyGroup">Novelty group</span> <input id="sc-novelty" type="text" /></label>
              <label class="span-2"><span data-i18n="admin.tags">Tags (comma)</span> <input id="sc-tags" type="text" /></label>
            </div>
            <label><span data-i18n="admin.stepsPriorities">Steps / Priorities</span>
              <textarea id="sc-steps" rows="6"></textarea>
            </label>
            <div class="row">
              <button id="sc-save-draft" data-i18n="admin.saveDraft">Save draft</button>
              <button id="sc-stage" class="ghost" data-i18n="admin.stage">Stage</button>
              <button id="sc-enable" data-i18n="admin.enable">Enable</button>
              <button id="sc-disable" class="danger" data-i18n="admin.disable">Disable</button>
            </div>
            <pre id="sc-report-output" class="list-item"></pre>
            <div id="sc-reports" class="list"></div>
          </div>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="worst">
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="worst-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <button id="worst-load" data-i18n="admin.load">Load</button>
        </div>
        <div id="worst-list" class="list"></div>
      </div>

      <div class="tab-panel hidden" data-panel="heatmap">
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="heatmap-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <button id="heatmap-load" data-i18n="admin.load">Load</button>
        </div>
        <table class="table" id="heatmap-table">
          <thead>
            <tr>
              <th data-i18n="admin.item">Item</th>
              <th data-i18n="admin.picked">Picked</th>
              <th data-i18n="admin.completed">Completed</th>
              <th data-i18n="admin.notRelevant">Not relevant</th>
              <th data-i18n="admin.completionRate">Completion rate</th>
              <th data-i18n="admin.notRelevantRate">Not relevant rate</th>
            </tr>
          </thead>
          <tbody></tbody>
        </table>
      </div>

      <div class="tab-panel hidden" data-panel="weekly">
        <div class="row">
          <button id="weekly-load" data-i18n="admin.load">Load</button>
          <button id="weekly-download" class="ghost" data-i18n="admin.downloadJson">Download JSON</button>
          <button id="weekly-disable-all" class="danger" data-i18n="admin.disableAll">Disable all candidates</button>
        </div>
        <div class="row">
          <label><span data-i18n="admin.kind">Kind</span>
            <select id="weekly-bump-kind">
              <option value="workout" data-i18n="admin.workouts">Workouts</option>
              <option value="nutrition" data-i18n="admin.nutritionLabel">Nutrition</option>
              <option value="reset" data-i18n="admin.resets">Resets</option>
            </select>
          </label>
          <label><span data-i18n="admin.item">Item</span> <input id="weekly-bump-id" type="text" /></label>
          <label><span data-i18n="admin.delta">Delta</span> <input id="weekly-bump-delta" type="number" value="1" /></label>
          <button id="weekly-bump" data-i18n="admin.bumpPriority">Bump priority</button>
        </div>
        <pre id="weekly-report" class="list-item"></pre>
      </div>

      <div class="tab-panel hidden" data-panel="params">
        <div id="params-list" class="list"></div>
      </div>

      <div class="tab-panel hidden" data-panel="packs">
        <div class="row">
          <label><span data-i18n="admin.pack">Pack</span>
            <select id="packs-select"></select>
          </label>
          <button id="packs-load" data-i18n="admin.load">Load</button>
        </div>
        <div class="grid-2">
          <label><span data-i18n="admin.packName">Pack name</span> <input id="packs-name" type="text" /></label>
          <div></div>
        </div>
        <label><span data-i18n="admin.packWeights">Weights (JSON)</span>
          <textarea id="packs-weights" rows="10"></textarea>
        </label>
        <label><span data-i18n="admin.packConstraints">Constraints (JSON)</span>
          <textarea id="packs-constraints" rows="6"></textarea>
        </label>
        <div class="row">
          <button id="packs-save" data-i18n="admin.save">Save</button>
          <span id="packs-status" class="muted"></span>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="experiments">
        <div class="row">
          <button id="experiments-load" data-i18n="admin.load">Load</button>
          <span id="experiments-status" class="muted"></span>
        </div>
        <div class="card">
          <h3 data-i18n="admin.createExperiment">Create experiment</h3>
          <div class="grid-2">
            <label><span data-i18n="admin.name">Name</span> <input id="exp-name" type="text" /></label>
            <label><span data-i18n="admin.status">Status</span>
              <select id="exp-status">
                <option value="draft" data-i18n="admin.draft">Draft</option>
                <option value="running" data-i18n="admin.running">Running</option>
                <option value="stopped" data-i18n="admin.stopped">Stopped</option>
              </select>
            </label>
          </div>
          <label><span data-i18n="admin.configJson">Config (JSON)</span>
            <textarea id="exp-config" rows="10"></textarea>
          </label>
          <div class="row">
            <button id="exp-create" data-i18n="admin.create">Create</button>
          </div>
        </div>
        <div id="experiments-list" class="list"></div>
        <div class="card">
          <h3 data-i18n="admin.assignments">Assignments</h3>
          <div class="row">
            <input id="exp-assign-id" type="text" placeholder="experiment id" data-i18n-placeholder="admin.experimentId" />
            <button id="exp-assign-load" data-i18n="admin.loadAssignments">Load assignments</button>
          </div>
          <pre id="experiments-assignments" class="list-item"></pre>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="previewMatrix">
        <div class="row">
          <label><span data-i18n="admin.packIds">Pack IDs (comma)</span> <input id="matrix-pack-ids" type="text" /></label>
          <label><span data-i18n="admin.profiles">Profiles (comma)</span> <input id="matrix-profiles" type="text" /></label>
          <label><span data-i18n="admin.timeBuckets">Time buckets (comma)</span> <input id="matrix-time-buckets" type="text" /></label>
        </div>
        <div class="row">
          <label><span data-i18n="admin.sleepQuality">Sleep</span> <input id="matrix-sleep" type="number" min="1" max="10" value="6" /></label>
          <label><span data-i18n="admin.stress">Stress</span> <input id="matrix-stress" type="number" min="1" max="10" value="5" /></label>
          <label><span data-i18n="admin.energy">Energy</span> <input id="matrix-energy" type="number" min="1" max="10" value="6" /></label>
          <label class="row">
            <input id="matrix-stage-mode" type="checkbox" />
            <span data-i18n="admin.stageMode">Stage mode</span>
          </label>
          <button id="matrix-run" data-i18n="admin.runMatrix">Run matrix</button>
        </div>
        <div class="table-wrap">
          <table class="table" id="matrix-table">
            <thead>
              <tr>
                <th data-i18n="admin.profile">Profile</th>
                <th data-i18n="admin.minutes">Minutes</th>
                <th data-i18n="admin.pack">Pack</th>
                <th data-i18n="admin.workout">Workout</th>
                <th data-i18n="admin.reset">Reset</th>
                <th data-i18n="admin.nutrition">Nutrition</th>
                <th data-i18n="admin.confidence">Confidence</th>
                <th data-i18n="admin.relevance">Relevance</th>
                <th data-i18n="admin.rules">Rules</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="cohorts">
        <div class="row">
          <button id="cohorts-load" data-i18n="admin.load">Load cohorts</button>
        </div>
        <div id="cohorts-list" class="list"></div>
        <div class="card">
          <h3 data-i18n="admin.setUserCohort">Set user cohort</h3>
          <div class="row">
            <input id="cohort-user-id" type="text" placeholder="user id" data-i18n-placeholder="admin.userId" />
            <input id="cohort-id" type="text" placeholder="cohort id" data-i18n-placeholder="admin.cohortId" />
            <button id="cohort-assign" data-i18n="admin.assign">Assign</button>
          </div>
        </div>
      </div>

      <div class="tab-panel hidden" data-panel="reminders">
        <div class="row">
          <input id="admin-reminders-date" type="date" />
          <select id="admin-reminders-status">
            <option value="" data-i18n="admin.anyStatus">Any status</option>
            <option value="scheduled" data-i18n="admin.scheduled">Scheduled</option>
            <option value="dismissed" data-i18n="admin.dismissed">Dismissed</option>
            <option value="completed" data-i18n="admin.completed">Completed</option>
          </select>
          <button id="admin-reminders-load" data-i18n="admin.load">Load</button>
        </div>
        <div id="admin-reminders-list" class="list"></div>
      </div>

      <div class="tab-panel hidden" data-panel="support">
        <div class="row">
          <label><span data-i18n="admin.userEmail">User email</span> <input id="support-email" type="email" /></label>
          <button id="support-search" data-i18n="admin.search">Search</button>
        </div>
        <div id="support-result" class="list"></div>
        <div class="row">
          <button id="support-debug-bundle" class="ghost" data-i18n="admin.debugBundle">Create debug bundle</button>
          <button id="support-replay" class="ghost" data-i18n="admin.replaySandbox">Replay sandbox</button>
        </div>
        <label><span data-i18n="admin.bundleId">Bundle ID</span> <input id="support-bundle-id" type="text" /></label>
        <button id="support-bundle-load" class="ghost" data-i18n="admin.loadBundle">Load bundle</button>
        <pre id="support-output" class="list-item"></pre>
      </div>

      <div class="tab-panel hidden" data-panel="changelog">
        <div class="grid-2">
          <label><span data-i18n="admin.version">Version</span> <input id="changelog-version" type="text" /></label>
          <label><span data-i18n="admin.audience">Audience</span>
            <select id="changelog-audience">
              <option value="admin" data-i18n="admin.adminAudience">Admin</option>
              <option value="user" data-i18n="admin.userAudience">User</option>
            </select>
          </label>
        </div>
        <label><span data-i18n="admin.titleLabel">Title</span> <input id="changelog-title" type="text" /></label>
        <label><span data-i18n="admin.notes">Notes</span>
          <textarea id="changelog-notes" rows="6"></textarea>
        </label>
        <div class="row">
          <button id="changelog-create" data-i18n="admin.create">Create</button>
          <button id="changelog-load" class="ghost" data-i18n="admin.load">Load</button>
        </div>
        <div id="changelog-list" class="list"></div>
      </div>
    </section>
  </main>

  <script type="module" src="/assets/app.core.js"></script>
</body>
</html>
